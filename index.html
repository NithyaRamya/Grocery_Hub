<!DOCTYPE html>
<!--
  =====================================================================
  FILE: index.html
  PROJECT: GroceryHub
  PURPOSE: Home page with full navbar, inline CSS, product sections,
           footer, modals (login/signup/account/location), cart popup,
           and fully commented JavaScript for cart, auth, search,
           location picker, and optional secured checkout/order tracking.
  NOTE: All CSS is included inline "as it is now" per your request.
        Scripts are expanded and commented line by line for readability.
  =====================================================================
-->
<html lang="en">
  <head>
    <!-- ============================== META ============================== -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- ============================== TITLE ============================= -->
    <title>GroceryHub - Fresh Groceries Delivered</title>

    <!-- ============================ FONTS/CDN =========================== -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    <!--
      If you keep an external stylesheet, this link remains.
      It's fine to have both external and inline CSS; inline rules below will win.
    -->
    <link rel="stylesheet" href="style.css" />

    <!-- ============================= INLINE CSS ========================= -->
    <!-- (kept exactly as provided) -->
    <style>
      body {
        font-family: 'Inter', sans-serif;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        background-color: #fff;
        color: #222;
      }

      .top-bar {
        background-color: #8BC34A;
        color: white;
        display: flex;
        justify-content: space-between;
        padding: 2px 20px;
        font-size: 13px;
        align-items: center;
        flex-wrap: wrap;
      }

      .top-bar .left,
      .top-bar .right {
        display: flex;
        align-items: center;
        gap: 15px;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 20px;
        background-color: white;
        /* border-bottom: 1px solid #eee;*/
        flex-wrap: wrap;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .logo img {
        width: 50px;
        height: 50px;
        object-fit: cover;
        border-radius: 50%;
      }

      nav {
        display: flex;
        align-items: center;
        gap: 30px;
      }

      nav a {
        text-decoration: none;
        color: #222;
        font-size: 16px;
        padding-bottom: 3px;
      }

      nav a.active {
        border-bottom: 2px solid #8BC34A;
      }

      .icons {
        display: flex;
        align-items: center;
        gap: 25px;
        font-size: 13px;
        color: #444;
      }

      .icons i {
        font-size: 18px;
        display: block;
        text-align: center;
      }

      .icons div {
        text-align: center;
      }

      @media (max-width: 768px) {
        header,
        .top-bar {
          flex-direction: column;
          align-items: flex-start;
        }

        nav,
        .icons {
          margin-top: 10px;
          gap: 15px;
        }
      }

      .login-icon {
        display: flex;
        flex-direction: column;
        align-items: center;
        color: white;
      }

      .login-icon .icon {
        font-size: 22px;
        line-height: 1;
      }

      .login-icon .text {
        font-size: 13px;
        font-weight: 600;
      }

      /* Modals */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 999;
      }

      .modal {
        background-color: #e6f4d8;
        padding: 30px;
        border-radius: 10px;
        width: 90%;
        max-width: 500px;
        position: relative;
      }

      .modal h2 {
        margin-top: 0;
      }

      .modal .close-btn {
        position: absolute;
        top: 15px;
        right: 20px;
        font-size: 24px;
        cursor: pointer;
      }

      .modal button {
        background-color: #8BC34A;
        border: none;
        padding: 10px 25px;
        font-size: 16px;
        color: white;
        border-radius: 10px;
        margin: 15px 0;
        cursor: pointer;
      }

      .modal input[type="text"] {
        padding: 10px;
        width: calc(100% - 100px);
        border-radius: 10px;
        border: 1px solid #ccc;
        margin-right: 10px;
      }

      .modal .input-group {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .phone-input {
        background: #8BC34A;
        color: #222;
        display: flex;
        align-items: center;
        padding: 12px;
        border-radius: 10px;
        margin-top: 10px;
      }

      .phone-input input {
        border: none;
        outline: none;
        background: transparent;
        color: #222;
        margin-left: 10px;
        width: 100%;
      }

      .login-modal {
        background-color: #DFF3C9;
        text-align: center;
        padding: 40px 30px;
      }

      .login-img {
        width: 100%;
        max-width: 280px;
        height: auto;
        margin-bottom: 20px;
      }

      .login-title {
        font-size: 22px;
        font-weight: 700;
        margin: 10px 0 5px;
        color: #000;
      }

      .login-subtitle {
        font-size: 14px;
        font-weight: 500;
        margin-bottom: 20px;
        color: #333;
      }

      .phone-input.full-width {
        background: #8BC34A;
        color: #fff;
        padding: 14px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        gap: 10px;
        margin: 0 auto 25px;
        max-width: 100%;
      }

      .phone-input.full-width input {
        background: transparent;
        border: none;
        outline: none;
        color: white;
        font-size: 16px;
        width: 100%;
      }

      .login-btn {
        background: white;
        color: #8BC34A;
        font-weight: 600;
        border-radius: 30px;
        padding: 14px 0;
        font-size: 18px;
        width: 100%;
        transition: all 0.3s ease;
      }

      .terms-text {
        font-size: 11px;
        color: #333;
        margin-top: 15px;
      }

      .continue-btn {
        width: 100%;
        background: white;
        color: #8BC34A;
        font-weight: bold;
        font-size: 20px;
        padding: 14px 0;
        border-radius: 30px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        border: none;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .continue-btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.25);
      }

      .otp-input {
        width: 300px;
        /* Make inputs full width of their container */
        box-sizing: border-box;
        /* Includes padding and border in width */
        padding: 12px 15px;
        /* Consistent padding */
        margin-bottom: 15px;
        /* Space between inputs */
        border: 1px solid #ccc;
        border-radius: 10px;
        font-size: 16px;
      }

      .fish-card,
      .dairy-card,
      .buy-card,
      .explore-card {
        cursor: pointer;
        transition: transform 0.2s;
      }

      .fish-card:hover,
      .dairy-card:hover,
      .buy-card:hover,
      .explore-card:hover {
        transform: scale(1.02);
      }

      a {
        text-decoration: none;
      }
    </style>

    <!-- ==================== LEAFLET CSS & JS (Map) ====================== -->
    <!-- Keep CDN version for live tiles -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  </head>

  <body>
    <!-- ============================ TOP BAR ============================= -->
    <div class="top-bar">
      <div class="left">
        <span><img src="images/Vector V.png" /> +91 87642 987687</span>
        <span><img src="images/Vector 1.png" /> +91 87642 987687</span>
      </div>
      <div id="welcome-msg">  </div>
      <div class="right">
        <div class="dropdown" onclick="openLocationMap()">
          <span>üìç <span id="current-location-text">Set your location</span></span>
        </div>
        <div class="dropdown" onclick="openAccountModal()">
          <span>Account <img src="images/Vector.png" /></span>
        </div>
        <div class="dropdown login-icon" onclick="openModal('loginModal')">
          <span class="icon"><img src="images/SVG.png" /></span>
          <span class="text">Login / Signup</span>
        </div>
      </div>
    </div>

    <!-- ============================= HEADER ============================= -->
    <header>
      <div class="logo">
        <img src="images/Ellipse 1.png" alt="logo" />
        <strong style="color: #7CB342">GroceryHub</strong>
      </div>

      <nav>
        <a href="#" class="active">Home</a>
        <a href="categories.html">Categories</a>
        <a href="deals.html">Deals</a>
      </nav>

      <div class="icons">
        <!-- Simple search toggle -->
        <div onclick="toggleSearch()" style="cursor: pointer">
          <img src="images/SEARCH.png" /><br />
          <span style="color: #8BC34A">Search</span>
        </div>

        <!-- Cart -->
        <div class="cart-container">
          <img src="images/Vector 8.png" class="cart-icon" id="cart-icon" /><br />
          <span class="cart-badge" id="cart-count">0</span>
          <span style="color: #8BC34A">Cart</span>
        </div>

        <!-- Liked -->
        <div>
          <img src="images/Vector O.png" /><br />
          <span style="color: #8BC34A">Liked</span>
        </div>
      </div>
    </header>

    <!-- ========================= INLINE SEARCH BAR ====================== -->
    <div
      id="search-bar"
      style="display: none; padding: 10px 20px; background: #f6ffe9"
    >
      <input
        id="search-input"
        placeholder="Search products..."
        style="width: 100%; padding: 12px 14px; border-radius: 10px; border: 1px solid #ddd"
      />
    </div>

    <!-- ============================== HERO ============================== -->
    <section class="hero">
      <div class="hero-text">
        <h1>Fresh Groceries Delivered To Your DoorStep</h1>
        <p>
          Emphasizing the Store‚Äôs Commitment to providing fresh Produce and
          Product Daily.
        </p>
        <button>Shop Now</button>
      </div>
      <img
        style="width: 400px"
        src="images/image 1.png"
        alt="delivery guy"
        width="300"
      />
    </section>

    <!-- ============================== BANNER ============================ -->
    <section class="banner">
      <img src="images/Link ‚Üí welcome-image.png" alt="ONE STOP SHOP" />
    </section>

    <!-- Placeholders for dynamically injected pages -->
    <div id="secured-checkup" style="display: none"></div>
    <div id="order-track-page" style="display: none"></div>

    <!-- ======================== CATEGORY SECTION ======================== -->
    <section class="section categories">
      <div class="section-header">
        <h2>Grocery & Kitchen</h2>
        <a href="categories.html" class="see-all-link">See all &gt;</a>
      </div>
      <div class="cards">
        <div class="card">
          <img src="images/Atta,Rice & Dal.png" />
          <p>Atta, Rice & Dal</p>
        </div>
        <div class="card">
          <img src="images/Group 182 J.png" />
          <p>Cooking Oil</p>
        </div>
        <div class="card">
          <img src="images/Masala & Spices H.png" />
          <p>Masala & Spices</p>
        </div>
        <div class="card">
          <img
            style="background: #eaf9fd; border-radius: 10px"
            src="images/category-image K.png"
          />
          <p>Chicken, Fish & Meat</p>
        </div>
        <div class="card">
          <img src="images/Fruits & Vegetables U.png" />
          <p>Fruits & Vegetables</p>
        </div>
      </div>
    </section>

    <!-- ====================== SNACKS & DRINKS SECTION =================== -->
    <section class="section">
      <div class="section-header">
        <h2>Snacks & Drinks</h2>
        <a href="categories.html" class="see-all-link">See all &gt;</a>
      </div>
      <div class="cards">
        <div class="card">
          <img src="images/Biscuits & Cookies.png" />
          <p>Biscuits & Cookies</p>
        </div>
        <div class="card">
          <img src="images/Breakfast Cereals J.png" />
          <p>Breakfast Cereals</p>
        </div>
        <div class="card">
          <img src="images/Pasta & Noodles J.png" />
          <p>Pasta & Noodles</p>
        </div>
        <div class="card">
          <img src="images/Sweets & Chocolates J.png" />
          <p>Sweets & Chocolates</p>
        </div>
      </div>
    </section>

    <!-- ======================= FISH & MEAT SECTION ====================== -->
    <section class="section">
      <h2>Fish and Meat</h2>
      <div class="cards-container">
        <div class="fish-card">
          <a href="product.html?product=premiumChicken">
            <img
              src="images/Premium Chicken Whole Skinless 1.png"
              alt="Premium Chicken Whole Skinless"
            />
            <p class="product-name">Premium Chicken Whole Skinless</p>
            <p class="product-quantity">250 GM</p>
          </a>
          <div class="price-container">
            <p class="price">‚Çπ74.75</p>
            <button class="options-button">4 Options</button>
          </div>
        </div>
        <div class="fish-card">
          <img
            src="images/Chicken Boneless Breast Fillet.png"
            alt="Chicken Boneless Breast Fillet"
          />
          <p class="product-name">Chicken Boneless Breast Fillet</p>
          <p class="product-quantity">250 GM</p>
          <div class="price-container">
            <p class="price">‚Çπ107.25</p>
            <button class="options-button">4 Options</button>
          </div>
        </div>
        <div class="fish-card">
          <a href="product.html?product=goatCurry">
            <img src="images/Goat Currycut.png" alt="Goat Currycut" />
            <p class="product-name">Goat Currycut</p>
            <p class="product-quantity">250 GM</p>
          </a>
          <div class="price-container">
            <p class="price">‚Çπ212.25</p>
            <button class="options-button">4 Options</button>
          </div>
        </div>
        <div class="fish-card">
          <img
            src="images/Chicken Liver Cut Pieces U.png"
            alt="Chicken Liver Cut Pieces"
          />
          <p class="product-name">Chicken Liver Cut Pieces</p>
          <p class="product-quantity">250 GM</p>
          <div class="price-container">
            <p class="price">‚Çπ249.75</p>
            <button class="options-button">4 Options</button>
          </div>
        </div>
        <div class="fish-card">
          <img
            src="images/Premium Chicken Whole Skinless 1.png"
            alt="Chicken Dressed With Skin Whole"
          />
          <p class="product-name">Chicken Dressed With Skin Whole</p>
          <p class="product-quantity">250 GM</p>
          <div class="price-container">
            <p class="price">‚Çπ59.75</p>
            <button class="options-button">4 Options</button>
          </div>
        </div>
        <div class="fish-card">
          <img
            src="images/Premium Chicken Drumstick Skinless U.png"
            alt="Premium Chicken Drumstick Skinless"
          />
          <p class="product-name">Premium Chicken Drumstick Skinless</p>
          <p class="product-quantity">250 GM</p>
          <div class="price-container">
            <p class="price">‚Çπ107.25</p>
            <button class="options-button">4 Options</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ===================== DAIRY, BREAD & EGGS SECTION ================= -->
    <section class="section">
      <h2>Dairy, Bread & Eggs</h2>
      <div class="cards-container">
        <div class="dairy-card">
          <img
            src="imagesbg/Jersey_Badam_Flavoured_Milk_190ML-removebg-preview.png"
            alt="Jersey Badam Flavoured Milk"
          />
          <p class="product-name">Jersey Badam Flavoured Milk</p>
          <p class="product-quantity">190 ML</p>
          <div class="price-container">
            <p class="price">‚Çπ40</p>
            <button class="add-button">+</button>
          </div>
        </div>
        <div class="dairy-card">
          <a href="product.html?product=freshMilk">
            <span class="discount-badge">3% OFF</span>
            <img
              src="imagesbg/Nandini_Goodlife_Milk_500GM-removebg-preview.png"
              alt="Nandini Goodlife Milk"
            />
            <p class="product-name">Nandini Goodlife Milk</p>
            <p class="product-quantity">500GM</p>
          </a>
          <div class="price-container">
            <p class="old-price"><del>‚Çπ30</del></p>
            <p class="price">‚Çπ29</p>
            <button
              class="add-button"
              data-product='{"name":"Nandini Goodlife Milk","quantity":"500 GM","price":29}'
            >
              +
            </button>
          </div>
        </div>
        <div class="dairy-card">
          <img
            src="imagesbg/Nandini_Goodlife_Milk_180ML-removebg-preview.png"
            alt="Nandini Goodlife Milk"
          />
          <p class="product-name">Nandini Goodlife Milk</p>
          <p class="product-quantity">180ML</p>
          <div class="price-container">
            <p class="price">‚Çπ14</p>
            <button class="add-button">+</button>
          </div>
        </div>
        <div class="dairy-card">
          <img
            src="imagesbg/Nandini_Slim_Uht_Milk_1L-removebg-preview.png"
            alt="Nandini Goodlife Milk/"
          />
          <p class="product-name">Nandini Slim Uht Milk 1L</p>
          <p class="product-quantity">1 LTR</p>
          <div class="price-container">
            <p class="price">‚Çπ71</p>
            <button class="add-button">+</button>
          </div>
        </div>
        <a href="product.html?product=milkyMistPaneer" class="dairy-card">
          <img
            src="imagesbg/Milky_Mist_Paneer-P-removebg-preview.png"
            alt="Milky Mist Paneer"
          />
          <p class="product-name">Milky Mist Paneer</p>
          <p class="product-quantity">200 GM</p>
          <div class="price-container">
            <p class="price">‚Çπ128</p>
            <button class="options-button">2 Options</button>
          </div>
        </a>
        <div class="dairy-card">
          <img
            src="imagesbg\Heritage_Premium_Badam_Milk_With_Badam_Bits_180ML-removebg-preview.png"
            alt="Heritage Premium Badam Milk With Bada..."
          />
          <p class="product-name">Heritage Premium Badam Milk With Bada...</p>
          <p class="product-quantity">180 ML</p>
          <div class="price-container">
            <p class="price">‚Çπ35</p>
            <button class="add-button">+</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ====================== BUY MORE, SAVE MORE SECTION =============== -->
    <section class="section">
      <h2>Buy More, Save More</h2>
      <div class="cards-container">
        <div class="buy-card">
          <a href="product.html?product=sparUradDal">
            <img
              src="imagesbg/SPAR_Select_Urad_Dal_500G-removebg-preview.png"
              alt="SPAR Select Urad Dal 500G"
            />
            <p class="product-name">SPAR Select Urad Dal 500G</p>
            <p class="product-quantity">500 GM</p>
          </a>
          <div class="price-container">
            <p class="price">‚Çπ110</p>
            <button
              class="add-button"
              data-product='{"name":"SPAR Select Urad Dal 500G","quantity":"500 GM","price":110}'
            >
              +
            </button>
          </div>
        </div>
        <div class="buy-card">
          <a href="product.html?product=bhagyalakshmiFriedGram">
            <img
              src="imagesbg/Bhagyalakshmi_Fried_Gram-P-removebg-preview.png"
              alt="Fried Gram Dal"
            />
            <p class="product-name">Bhagyalakshmi Fried Gram</p>
            <p class="product-quantity">250 GM</p>
          </a>
          <div class="price-container">
            <p class="price">‚Çπ40</p>
            <button class="options-button">2 Options</button>
          </div>
        </div>
        <div class="buy-card">
          <a href="product.html?product=popularMoongDal">
            <img
              src="images/Screenshot_2025-03-31_150052-removebg-preview 1.png"
              alt="Popular Moong Dal"
            />
            <p class="product-name">Popular Moong Dal 1KG</p>
            <p class="product-quantity">1 KG</p>
          </a>
          <div class="price-container">
            <p class="old-price"><del>‚Çπ190</del></p>
            <p class="price">‚Çπ159</p>
            <button
              class="add-button"
              data-product='{"name":"Popular Moong Dal 2KG","quantity":"2 KG","price":258}'
            >
              +
            </button>
          </div>
        </div>
        <div class="buy-card">
          <img
            src="images/Screenshot_2025-03-31_150157-removebg-preview 1.png"
            alt="SPAR Select Spotted Double Beans"
          />
          <p class="product-name">SPAR Select Spotted Double Beans</p>
          <p class="product-quantity">200 GM</p>
          <div class="price-container">
            <p class="price">‚Çπ150</p>
            <button class="options-button">2 Options</button>
          </div>
        </div>
        <div class="buy-card">
          <img
            src="imagesbg/Loose_Bestprice_Fried_Gram-removebg-preview.png"
            alt="Loose Bestprice Fried Gram"
          />
          <p class="product-name">Loose Bestprice Fried Gram</p>
          <p class="product-quantity">250 GM</p>
          <div class="price-container">
            <p class="price">‚Çπ42.25</p>
            <button class="options-button">3 Options</button>
          </div>
        </div>

        <div class="buy-card">
          <img
            src="imagesbg/Popular_Moong_Dal_2KG-removebg-preview.png"
            alt="Popular Moong Dal 2KG"
          />
          <p class="product-name">Popular Moong Dal 2KG</p>
          <p class="product-quantity">2 KG</p>
          <div class="price-container">
            <p class="old-price"><del>‚Çπ299</del></p>
            <p class="price">‚Çπ258</p>
            <button class="add-button">+</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ============================== BANNER ============================ -->
    <section class="banner">
      <img src="images/seasonal fruit banner.PNG" />
    </section>

    <!-- ======================== EXPLORE CATEGORIES ====================== -->
    <section class="section">
      <h2>Explore Categories</h2>
      <div class="cards-container">
        <div class="explore-card">
          <a href="product.html?product=royalGalaApple">
            <img src="images/Apple Royalgala.png" alt="Apple Royalgala" />
            <p class="product-name">Apple Royalgala 500 GM</p>
            <p class="product-quantity">500 GM</p>
          </a>
          <div class="price-container">
            <p class="price">‚Çπ124.5</p>
            <button
              class="add-button"
              data-product='{"name":"Apple Royalgala 500 GM","quantity":"500 GM","price":124.5}'
            >
              +
            </button>
          </div>
        </div>
        <div class="explore-card">
          <a href="product.html?product=appleShimla">
            <img src="images/Apple Shimla.png" alt="Apple Shimla" />
            <p class="product-name">Apple Shimla</p>
            <p class="product-quantity">500 GM</p>
          </a>
          <div class="price-container">
            <p class="price">‚Çπ114.5</p>
            <button
              class="add-button"
              data-product='{"name":"Apple Shimla","quantity":"500 GM","price":114.5}'
            >
              +
            </button>
          </div>
        </div>
        <div class="explore-card">
          <a href="product.html?product=bananaRobusta">
            <img src="images/Banana Robusta.png" alt="Banana Robusta" />
            <p class="product-name">Banana Robusta</p>
            <p class="product-quantity">500 GM</p>
          </a>
          <div class="price-container">
            <p class="price">‚Çπ27.5</p>
            <button
              class="add-button"
              data-product='{"name":"Banana Robusta","quantity":"500 GM","price":27.5}'
            >
              +
            </button>
          </div>
        </div>
        <div class="explore-card">
          <a href="product.html?product=royalGalaApple">
            <img src="images/Banana Yelakki.png" alt="Banana Yelakki" />
            <p class="product-name">Banana Yelakki</p>
            <p class="product-quantity">500 GM</p>
          </a>
          <div class="price-container">
            <p class="price">‚Çπ62.5</p>
            <button
              class="add-button"
              data-product='{"name":Banana Yelakki","quantity":"500 GM","price":62.5}'
            >
              +
            </button>
          </div>
        </div>
        <div class="explore-card">
          <a href="product.html?product=royalGalaApple">
            <img src="images/Orange Nagpur.png" alt="Orange Nagpur" />
            <p class="product-name">Orange Nagpur</p>
            <p class="product-quantity">500 GM</p>
          </a>
          <div class="price-container">
            <p class="price">‚Çπ59.5</p>
            <button
              class="add-button"
              data-product='{"name":"Orange Nagpur","quantity":"500 GM","price":59.5}'
            >
              +
            </button>
          </div>
        </div>
        <div class="explore-card">
          <a href="product.html?product=royalGalaApple">
            <img src="images/Guava Prepack.png" alt="Guava Prepack" />
            <p class="product-name">Guava Prepack</p>
            <p class="product-quantity">300 GM</p>
          </a>
          <div class="price-container">
            <p class="price">‚Çπ38.7</p>
            <button
              class="add-button"
              data-product='{"name":"Guava Prepack","quantity":"300 GM","price":38.7}'
            >
              +
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- =========================== TESTIMONIALS ========================= -->
    <section class="testimonials">
      <h2 class="testimonial-heading">What Our Beloved Customer Say About Us</h2>
      <div class="testimonial-cards">
        <div class="testimonial-card">
          <div class="quote-icon">
            <img src="images/Symbol.png" />
          </div>
          <div class="stars">
            <img src="images/Group 250.png" />
          </div>
          <p>
            "I've been shopping at this store for years and I'm always impressed
            with the quality of their produce and meats. The staff is friendly
            and helpful too!"
          </p>
          <div class="customer">
            <img src="images/G.png" alt="Astha Kohli" />
            <span><strong>Astha Kohli</strong></span>
          </div>
        </div>
        <div class="testimonial-card">
          <div class="quote-icon">
            <img src="images/Symbol.png" />
          </div>
          <div class="stars">
            <img src="images/Group 176.png" />
          </div>
          <p>
            "I love the variety of products they carry, especially the organic
            and gluten-free options. The prices are reasonable too!"
          </p>
          <div class="customer">
            <img src="images/Ellipse 2 H.png" alt="Neeraj Singh" />
            <span><strong>Neeraj Singh</strong></span>
          </div>
        </div>
      </div>
    </section>

    <!-- ============================== FOOTER ============================ -->
    <footer class="footer">
      <div class="footer-top">
        <div class="footer-logo">
          <div class="logo-heading">
            <img src="images/Ellipse 1.png" alt="Logo" />
            <h2>GroceryHub</h2>
          </div>
          <p>
            GroceryHub brings its customers low prices every day. We offer a
            wide choice covering fresh & packaged food, grains, pulses, dairy,
            frozen, plastics, utensils, crockery, travel, stationery, & more.
            SPAR has 13,900 stores in 48 countries. In India, SPAR has 23
            stores across 8 cities.
          </p>
          <p class="email"><img src="images/Mail.png" alt="" /> business@groceryhub.com</p>
          <p class="web"><img src="images/Internet.png" alt="" /> www.Grocery.in</p>
        </div>

        <div class="footer-columns">
          <div>
            <h4>Our Services</h4>
            <ul>
              <li>Your Account</li>
              <li>FAQS</li>
              <li>Store List</li>
            </ul>
          </div>
          <div>
            <h4>Let Us Help You</h4>
            <ul>
              <li>Help & Support</li>
              <li>Share Feedback</li>
              <li>Call Us</li>
            </ul>
          </div>
          <div>
            <h4>Quick Links</h4>
            <ul>
              <li>About Us</li>
              <li>Terms</li>
              <li>Privacy Policy</li>
              <li>Return & Refund Policy</li>
            </ul>
          </div>
        </div>

        <div class="footer-social">
          <h4>Connect With Us</h4>
          <div class="social-icons">
            <img src="images/Item.png" alt="Facebook" />
            <img src="images/x.png" alt="X" />
            <img src="images/Item P.png" alt="Instagram" />
            <img src="images/Item 9.png" alt="LinkedIn" />
          </div>
          <div class="store-icons">
            <img src="images/Link ‚Üí app-store-image.png" alt="App Store" />
            <img src="images/Link ‚Üí paly-store-image.png" alt="Play Store" />
          </div>
        </div>
      </div>

      <div class="footer-bottom">GroceryHub India ¬© All rights Reserved</div>
    </footer>

    <!-- ============================ CART POPUP ========================== -->
    <div id="cart-popup" class="cart-popup">
      <div class="cart-header">
        <h1>My Cart</h1>
        <h2><span id="item-count">0</span> Items</h2>
        <span id="close-cart" class="close-btn">X</span>
      </div>

      <div class="cart-body">
        <div id="cart-items"></div>

        <div class="bill-section">
          <h4>Bill Details</h4>
          <div class="bill-line">
            <span>Total qty (<span id="qty-count">0</span>)</span
            ><span id="item-total">‚Çπ0</span>
          </div>
          <div class="bill-line">
            <span>Handling fee</span><span>‚Çπ10</span>
          </div>
          <div class="bill-line total">
            <span>To Pay</span><span id="total-pay">‚Çπ10/-</span>
          </div>
        </div>

        <div class="cart-footer">
          <button class="buy-btn">Buy Now</button>
        </div>
      </div>
    </div>

    <!-- ============================= MODALS ============================= -->
    <!-- üó∫Ô∏è Location Modal -->
    <div class="modal-overlay" id="locationModal">
      <div class="modal" style="max-width: 700px">
        <span class="close-btn" onclick="closeModal('locationModal')">&times;</span>
        <h2>Select Your Location</h2>
        <div id="map" style="height: 350px; border-radius: 10px"></div>
        <p id="pickedAddress" style="margin-top: 10px; font-weight: 600; color: #4a7d20"></p>
        <button class="continue-btn" style="margin-top: 10px" onclick="closeModal('locationModal')">
          Done
        </button>
      </div>
    </div>

    <!-- üë§ Account Modal -->
    <div class="modal-overlay" id="accountModal">
      <div class="modal">
        <span class="close-btn" onclick="closeModal('accountModal')">&times;</span>
        <div id="accountContent">
          <h2>Your Account</h2>
          <p>You are not logged in.</p>
          <button class="continue-btn" onclick="openModal('loginModal')">Login</button>
        </div>
      </div>
    </div>

    <!-- üìù Sign-Up Modal -->
    <div class="modal-overlay" id="signupModal">
      <div class="modal login-modal">
        <span class="close-btn" onclick="closeModal('signupModal')">&times;</span>
        <h2 class="login-title">Create Account</h2>
        <p class="login-subtitle">Sign up to start shopping with GroceryHub</p>

        <input type="text" id="signupName" placeholder="Full Name" class="otp-input" />
        <input type="email" id="signupEmail" placeholder="Email Address" class="otp-input" />
        <input type="text" id="signupPhone" placeholder="Phone Number" maxlength="10" class="otp-input" />
        <input type="password" id="signupPassword" placeholder="Password" class="otp-input" />

        <button class="continue-btn login-btn" onclick="handleSignup()">Sign Up</button>
        <p style="margin-top: 15px; text-align: center">
          Already have an account?
          <a href="#" onclick="toggleModals('signupModal','loginModal');return false;">Login</a>
        </p>
      </div>
    </div>

    <!-- üîê Login Modal -->
    <div class="modal-overlay" id="loginModal">
      <div class="modal login-modal">
        <span class="close-btn" onclick="closeModal('loginModal')">&times;</span>
        <h2 class="login-title">Login</h2>
        <p class="login-subtitle">Enter your account details</p>

        <input type="email" id="loginEmail" placeholder="Email Address" class="otp-input" />
        <input type="password" id="loginPassword" placeholder="Password" class="otp-input" />

        <button class="continue-btn login-btn" onclick="handleLogin()">Login</button>
        <p style="margin-top: 15px; text-align: center">
          New user?
          <a href="#" onclick="toggleModals('loginModal','signupModal');return false;">Sign Up</a>
        </p>
      </div>
    </div>

    <!-- ============================ SCRIPT(S) =========================== -->
    <!-- You can keep this external if you have additional code there -->
    <script src="script.js"></script>

    
    <!-- =================== CART COUNT & ADD BUTTONS ===================== -->
    <script>
      // updateCartCount(): Reads cart from localStorage and updates the visible badge.
      function updateCartCount() {
        // Read cart array; if nothing stored, use an empty array.
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        // Sum quantities in the cart (each item expected to have a "quantity" number).
        const totalQty = cart.reduce((sum, item) => sum + item.quantity, 0);
        // Update the header cart badge with the total quantity.
        document.getElementById('cart-count').textContent = totalQty;
      }

      // setupAddButtons(): Attaches click handlers to every ".add-button" on product cards.
      function setupAddButtons() {
        // Select all "plus" buttons across the page.
        const addButtons = document.querySelectorAll('.add-button');

        // Iterate and attach event listeners.
        addButtons.forEach((button) => {
          button.addEventListener('click', (e) => {
            // Prevent clicking "+" inside an anchor from navigating away.
            e.preventDefault();

            // (Lightweight) Visual increment: We keep a session counter to update badge quickly.
            let currentCount = parseInt(sessionStorage.getItem('cartCount')) || 0;
            currentCount += 1;
            sessionStorage.setItem('cartCount', currentCount);

            // Also call updateCartCount to reflect true persisted cart if you maintain it elsewhere.
            updateCartCount();
          });
        });
      }

      // On window load, update the cart badge and bind "+" buttons.
      window.addEventListener('load', () => {
        updateCartCount();
        setupAddButtons();
      });

      // "Buy Now" in the cart popup: If cart is empty, alert; else go to checkout page.
      document.querySelector('.buy-btn').addEventListener('click', () => {
        // Read cart from localStorage (server-side carts would be fetched from API instead).
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        // If cart has no items, notify the user.
        if (cart.length === 0) {
          alert('Your cart is empty!');
          return;
        }
        // Proceed to checkout screen (static page in this demo).
        window.location.href = 'checkout.html';
      });
    </script>

    <!-- ============================== SEARCH =========================== -->
    <script>
      // toggleSearch(): Shows/hides the inline search bar under the header.
      function toggleSearch() {
        // Grab the search bar container.
        const el = document.getElementById('search-bar');
        // Toggle display between "none" and "block".
        el.style.display = el.style.display === 'none' ? 'block' : 'none';
        // If just opened, focus the input for convenience.
        if (el.style.display === 'block') document.getElementById('search-input').focus();
      }

      // Live filter: When the user types, filter product cards by product name.
      document.getElementById('search-input')?.addEventListener('input', (e) => {
        // Normalize the query for a case-insensitive match.
        const q = e.target.value.toLowerCase().trim();
        // Collect all card types we want to filter.
        const cards = document.querySelectorAll('.fish-card,.dairy-card,.buy-card,.explore-card');
        // For each card, check the ".product-name" text.
        cards.forEach((c) => {
          const name = (c.querySelector('.product-name')?.textContent || '').toLowerCase();
          // Show if it includes the query; otherwise hide.
          c.style.display = name.includes(q) ? '' : 'none';
        });
      });
    </script>

    <!-- ======================= AUTH / PROFILE / UI ====================== -->
    <script>
      // -------------------- Storage helpers --------------------

      // getUsers(): returns all users stored in localStorage under "gh_users" or an empty object.
      function getUsers() {
        return JSON.parse(localStorage.getItem('gh_users') || '{}');
      }

      // saveUsers(users): persists the provided users object to localStorage.
      function saveUsers(users) {
        localStorage.setItem('gh_users', JSON.stringify(users));
      }

      // getCurrentUser(): reads "gh_current_user" (email) and returns its user object (or null).
      function getCurrentUser() {
        // Read the email used as a key for the active user.
        const email = localStorage.getItem('gh_current_user');
        if (!email) return null; // If no active user, return null.

        // Fetch all users and get the one by email.
        const users = getUsers();
        return users[email] || null; // Return the user object or null if not found.
      }

      // setCurrentUser(email): set or clear the active user in localStorage.
      function setCurrentUser(email) {
        // If an email is provided, we store it as the current user; else we clear it.
        if (email) localStorage.setItem('gh_current_user', email);
        else localStorage.removeItem('gh_current_user');
      }

      // ------------------------ Auth: Sign Up -------------------

      // handleSignup(): collects fields from "signupModal" and creates a new user.
      function handleSignup() {
        // Read form fields & normalize email.
        const name = document.getElementById('signupName').value.trim();
        const email = document.getElementById('signupEmail').value.trim().toLowerCase();
        const phone = document.getElementById('signupPhone').value.trim();
        const password = document.getElementById('signupPassword').value.trim();

        // Basic validation to ensure required fields are present.
        if (!name || !email || !password) {
          alert('Please fill all required fields (Name, Email, Password).');
          return;
        }

        // Pull existing users from storage.
        const users = getUsers();

        // If the email already exists, prompt to login instead.
        if (users[email]) {
          alert('User already exists. Please login instead.');
          closeModal('signupModal');
          openModal('loginModal');
          return;
        }

        // Create and save the user object under its email.
        users[email] = { name, email, phone, password, location: 'Set your location' };
        saveUsers(users);

        // Mark this user as the currently logged-in user.
        setCurrentUser(email);

        // Welcome notification and UI updates.
        alert(`Welcome, ${name}! üéâ`);
        closeModal('signupModal');
        updateNavbar();
      }

      // ------------------------ Auth: Login ---------------------

      // handleLogin(): verifies credentials and logs the user in.
      function handleLogin() {
        // Read and normalize the email & read password.
        const email = document.getElementById('loginEmail').value.trim().toLowerCase();
        const password = document.getElementById('loginPassword').value.trim();

        // Fetch all users and locate the one attempting to login.
        const users = getUsers();
        const user = users[email];

        // If user not found or password mismatch, inform the user.
        if (!user || user.password !== password) {
          alert('Invalid email or password.');
          return;
        }

        // Set current user and close modal.
        setCurrentUser(email);
        alert(`Welcome back, ${user.name}! üåø`);
        closeModal('loginModal');

        // Update UI pieces that depend on login state (welcome, location, button label).
        updateNavbar();
      }

      // ------------------------ Auth: Logout --------------------

      // handleLogout(): clears current user and updates UI.
      function handleLogout() {
        // Remove current user from localStorage.
        setCurrentUser(null);
        // Update header/login control to reflect logged-out state.
        updateNavbar();
        // Confirm to user.
        alert('You have been logged out.');
      }

      // ---------------------- Navbar State Fill -----------------

      // updateNavbar(): sets welcome message, location, and login button behavior based on auth state.
      function updateNavbar() {
        // Grab relevant DOM nodes.
        const user = getCurrentUser();
        const loginBtn = document.querySelector('.login-icon .text');
        const welcomeMsg = document.getElementById('welcome-msg');
        const locSpan = document.getElementById('current-location-text');

        if (user) {
          // If logged in:
          // Set the login button to "Logout" and bind the logout handler on its parent icon.
          loginBtn.textContent = 'Logout';
          loginBtn.parentElement.onclick = handleLogout;

          // Show "Welcome, <Name>" text in top bar.
          if (welcomeMsg) welcomeMsg.textContent = `üåø Welcome, ${user.name}!`;

          // Display the user's saved location if available.
          if (locSpan) locSpan.textContent = user.location || 'Set your location';
        } else {
          // If logged out:
          // Show default label and bind opening of login modal.
          loginBtn.textContent = 'Login / Signup';
          loginBtn.parentElement.onclick = () => openModal('loginModal');

          // Clear welcome message and reset location label.
          if (welcomeMsg) welcomeMsg.textContent = '';
          if (locSpan) locSpan.textContent = 'Set your location';
        }
      }

      // Ensure navbar is updated once the DOM is ready.
      document.addEventListener('DOMContentLoaded', updateNavbar);

      // ----------------------- Account Modal Fill ----------------

      // openAccountModal(): opens account modal and fills content depending on login state.
      function openAccountModal() {
        // Read the active user.
        const user = getCurrentUser();

        // Open the modal overlay.
        openModal('accountModal');

        // Target the modal box element so we can replace its inner HTML.
        const modal = document.querySelector('#accountModal .modal');

        // If not logged in, show a small prompt to log in.
        if (!user) {
          modal.innerHTML = `
            <span class="close-btn" onclick="closeModal('accountModal')">&times;</span>
            <h2>Not logged in</h2>
            <button onclick="openModal('loginModal'); closeModal('accountModal')">Login</button>`;
          return;
        }

        // If logged in, show customer details and quick links.
        modal.innerHTML = `
          <span class="close-btn" onclick="closeModal('accountModal')">&times;</span>
          <h2>Welcome, ${user.name}</h2>
          <p><strong>Email:</strong> ${user.email}</p>
          <p><strong>Phone:</strong> ${user.phone || '-'}</p>
          <p><strong>Location:</strong> ${user.location || 'Not set'}</p>
          <hr>
          <ul>
            <li><a href="account.html">Your Account</a></li>
            <li><a href="orders.html">Your Orders</a></li>
            <li><a href="wishlist.html">Your Wishlist</a></li>
            <li><a href="saveitems.html">Subscribe & Save</a></li>
          </ul>
          <button onclick="handleLogout()">Logout</button>`;
      }

      // -------------------------- Modal Helpers -----------------

      // openModal(id): displays a modal overlay by id.
      function openModal(id) {
        document.getElementById(id).style.display = 'flex';
      }

      // closeModal(id): hides a modal overlay by id.
      function closeModal(id) {
        document.getElementById(id).style.display = 'none';
      }

      // toggleModals(from, to): convenience helper to switch between two modals (e.g., login <-> signup).
      function toggleModals(from, to) {
        closeModal(from);
        openModal(to);
      }

      // -------------------------- Location Picker ----------------

      // openLocationMap(): opens the location modal and initializes Leaflet map with reverse geocoding.
      function openLocationMap() {
        // Open the location modal.
        openModal('locationModal');

        // Replace modal content to ensure fresh map mount point each time.
        const modal = document.querySelector('#locationModal .modal');
        modal.innerHTML = `
          <span class="close-btn" onclick="closeModal('locationModal')">&times;</span>
          <h2>Select Your Delivery Location</h2>
          <div id="map" style="height:350px;border-radius:10px;"></div>
          <p id="pickedAddress" style="margin-top:10px;font-weight:600;color:#4a7d20;"></p>
          <button style="margin-top:10px;" onclick="closeModal('locationModal')">Done</button>
        `;

        // Create map centered on Chennai by default (lat, lon).
        const map = L.map('map').setView([13.0827, 80.2707], 12);

        // Add OpenStreetMap tiles (standard Leaflet usage).
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19,
          attribution: '&copy; OpenStreetMap'
        }).addTo(map);

        // We'll keep the last marker reference here so we can remove it before placing a new one.
        let marker;

        // On map click: place marker and reverse geocode the coordinates.
        map.on('click', async (e) => {
          // Extract latitude and longitude from the click event.
          const { lat, lng } = e.latlng;

          // If a previous marker exists, remove it for a single-marker UX.
          if (marker) marker.remove();

          // Place a new marker on the map where the user clicked.
          marker = L.marker([lat, lng]).addTo(map);

          // Reverse geocode using Nominatim (free OpenStreetMap geocoder) to convert lat/lng into an address string.
          const response = await fetch(
            `https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lng}&format=json`
          );
          const data = await response.json();

          // If display_name present, use it. Otherwise show a quick coordinate string.
          const address = data.display_name || `Lat: ${lat.toFixed(4)}, Lon: ${lng.toFixed(4)}`;

          // Show the selected address under the map in the modal.
          document.getElementById('pickedAddress').textContent = address;

          // If a user is logged in, save the chosen address to their profile and update navbar.
          const user = getCurrentUser();
          if (user) {
            const users = getUsers();
            users[user.email].location = address;
            saveUsers(users);
            updateNavbar();
          }
        });
      }
    </script>

    <!-- ========== OPTIONAL: SECURED CHECKUP / ORDER TRACK (DYNAMIC) ===== -->
    <script>
      // DOMContentLoaded: check URL parameters to decide what to show
      window.addEventListener('DOMContentLoaded', () => {
        // Parse the current URL's query string
        const params = new URLSearchParams(window.location.search);

        // If ?secureCheckout=true is present, show secured checkout
        if (params.get('secureCheckout') === 'true') {
          showSecuredCheckupPage();
        }
        // Else, if ?trackOrder=true is present, show order tracking view
        else if (params.get('trackOrder') === 'true') {
          showTrackOrderPage();
        }
        // Otherwise load the homepage normally (already visible by default)
        else {
          updateCartCount();
          setupAddButtons();
        }
      });

      // showSecuredCheckupPage(): Builds a simple secured checkout summary from localStorage data.
      function showSecuredCheckupPage() {
        // Read the product(s) that were staged for secured checkout.
        const productStr = localStorage.getItem('securedCheckoutProduct');
        if (!productStr) return;

        // Parse JSON; allow for both single object and array cases.
        let products = JSON.parse(productStr);
        if (!Array.isArray(products)) {
          products = [products];
        }

        // Hide all home sections while showing the secured summary page.
        document.querySelectorAll('section, .some-homepage-class').forEach((el) => {
          el.style.display = 'none';
        });

        // Construct the HTML for each product and a total box + payment choice.
        let html = `
          <div style="background:#e1f2c5; padding: 20px; min-height:100vh;">
            <h1 style="color:#4a7d20; font-weight:bold;">Secured CheckUp</h1>
            <div style="display:flex; flex-direction: column; gap: 30px; margin-top:30px;">
        `;

        // Build product cards
        products.forEach((product) => {
          html += `
            <div style="display:flex; flex-wrap:wrap; gap:30px; border:1px solid #ccc; border-radius:10px; padding:20px; background:#fff;">
              <div style="flex:1; min-width:300px;">
                <img src="${product.imageSrc}" alt="${product.altText}" style="max-width:300px; border-radius:10px;">
                <h2>${product.productNameLine}</h2>
                <p>${product.description}</p>
                <h3>Key Features</h3>
                <ul>
                  ${product.keyFeatures.map((f) => `<li>${f}</li>`).join('')}
                </ul>
                <h3>Product Details</h3>
                <ul>
                  ${product.productDetails.map((d) => `<li>${d}</li>`).join('')}
                </ul>
                <p><strong>Quality No:</strong> ${product.qualityNo} &nbsp;&nbsp; ‚ù§Ô∏è <strong>In Stock:</strong> ${product.stockCount}</p>
                <p>Price per unit: <strong>${product.price}</strong></p>
                <p>Quantity: <strong>${product.quantity}</strong></p>
                <p>Total Price: <strong>${product.totalPrice}</strong></p>
              </div>
            </div>
          `;
        });

        // Calculate total cost by summing product.totalPrice (sanitize currency symbols first)
        const grandTotal = products
          .reduce(
            (sum, p) =>
              sum +
              parseFloat(
                (p.totalPrice || '0').toString().replace(/[‚Çπ$,/-]/g, '')
              ),
            0
          )
          .toFixed(2);

        // Payment & confirm area
        html += `
            </div>

            <div style="
              display: flex;
              flex-wrap: wrap;
              justify-content: center;
              gap: 30px;
              margin-top: 50px;
            ">
              <div style="
                flex: 1;
                min-width: 250px;
                max-width: 400px;
                background: #fff;
                border-radius: 10px;
                padding: 20px;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
              ">
                <h3 style="margin-bottom: 10px;">Total Cost</h3>
                <p style="margin: 5px 0; color: #333;">Session free for 30 minutes</p>
                <h2 style="color: #4a7d20; margin-top: 10px; margin-bottom: 5px;">
                  ${grandTotal} /-
                </h2>
                <p style="margin-top: 20px;">
                  <button style="
                    background: #8BC34A;
                    color: white;
                    border: none;
                    padding: 10px 20px;
                    border-radius: 30px;
                    font-weight: bold;
                    cursor: pointer;
                  ">
                    Use Promo code
                  </button>
                </p>
              </div>

              <div style="
                flex: 1;
                min-width: 250px;
                max-width: 400px;
                background: #fff;
                border-radius: 10px;
                padding: 20px;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
              ">
                <h3 style="margin-bottom: 15px;">PAYMENT OPTIONS</h3>
                <div style="margin-bottom: 15px;">
                  <label style="display:flex; align-items: center; gap:10px; margin-bottom:10px;">
                    <input type="radio" name="payment" value="paypal" />
                    <span>Paypal</span>
                    <img src="images/Screenshot_2024-11-27_110140-removebg-preview 2.png" style="height: 20px;" />
                  </label>
                  <label style="display:flex; align-items: center; gap:10px;">
                    <input type="radio" name="payment" value="card" checked />
                    <span>Credit card</span>
                    <img src="images/Screenshot_2024-11-27_110227-removebg-preview 2.png" style="height: 20px;" />
                    <img src="images/Screenshot_2024-11-27_110406-removebg-preview 2.png" style="height: 20px;" />
                    <img src="images/Screenshot_2024-11-27_110552-removebg-preview 2.png" style="height: 20px;" />
                  </label>
                </div>
              </div>
            </div>

            <div style="text-align:center; margin-top:40px;">
              <button id="pay-confirm-btn" style="
                background: #8bc34a;
                color: white;
                padding: 15px 40px;
                border: none;
                border-radius: 30px;
                font-size: 16px;
                font-weight: bold;
                cursor: pointer;
              ">
                Pay & Confirm
              </button>
            </div>
          </div>
        `;

        // Render it into the container and show it.
        const container = document.getElementById('secured-checkup');
        container.innerHTML = html;
        container.style.display = 'block';

        // Wire up Confirm button for credit card option (simple demo).
        const btn = document.getElementById('pay-confirm-btn');
        if (btn) {
          btn.addEventListener('click', () => {
            // Read the currently selected payment radio button.
            const selected = document.querySelector('input[name="payment"]:checked');

            // Only proceed for "card" in this demo.
            if (selected && selected.value === 'card') {
              // Calculate total from products again as a safeguard.
              const totalAmount = products.reduce(
                (sum, p) =>
                  sum +
                  parseFloat(
                    (p.totalPrice?.toString() || '0').replace(/[‚Çπ$,/-]/g, '')
                  ),
                0
              );

              // Save it for the card-payment screen to pick up.
              localStorage.setItem('checkoutTotal', totalAmount.toFixed(2));

              // Redirect to a hypothetical card payment page.
              window.location.href = 'card-payment.html';
            } else {
              // If not card, notify the user.
              alert('Please choose Credit Card to proceed.');
            }
          });
        }
      }

      // showTrackOrderPage(): Provides a simple static tracking timeline for the last orderSummary in localStorage.
      function showTrackOrderPage() {
        // For demo/logging.
        console.log('showTrackOrderPage running!');

        // Hide homepage UI while showing the tracker.
        document.querySelectorAll('section, .some-homepage-class').forEach((el) => {
          el.style.display = 'none';
        });

        // Make the target container visible.
        const container = document.getElementById('order-track-page');
        container.style.display = 'block';

        // Build a simple layout with an image, basic details, and a four-step timeline.
        let html = `
          <div class="product-container" style="display: flex; gap: 30px; flex-wrap: wrap; margin-top: 40px; background: #fff; padding: 20px; border-radius: 10px;">
            <img id="product-image" src="" alt="Product Image" style="max-width: 300px; border-radius: 10px;" />
            <div>
              <h2 id="product-name" style="color:#4a7d20; margin-bottom:10px;"></h2>
              <p><strong>Order Placed....!</strong> ‚ù§Ô∏è</p>
              <p id="product-description"></p>
              <p id="product-details"></p>
              <p id="quantity"></p>
              <p><strong>Delivery by Tue 28 June</strong></p>
            </div>
          </div>

          <div class="timeline" style="display: flex; justify-content: center; align-items: center; flex-wrap: wrap; gap: 10px; margin-top: 50px;">
            <div class="step active" style="display: flex; flex-direction: column; align-items: center;">
              <div class="step-circle" style="width: 20px; height: 20px; border-radius: 50%; background: #4a7d20; margin-bottom: 5px;"></div>
              <div>Ordered<br />15 June</div>
            </div>
            <div class="line" style="width: 50px; height: 2px; background: #4a7d20;"></div>
            <div class="step active" style="display: flex; flex-direction: column; align-items: center;">
              <div class="step-circle" style="width: 20px; height: 20px; border-radius: 50%; background: #4a7d20; margin-bottom: 5px;"></div>
              <div>Shipped<br />18 June</div>
            </div>
            <div class="line" style="width: 50px; height: 2px; background: #4a7d20;"></div>
            <div class="step" style="display: flex; flex-direction: column; align-items: center;">
              <div class="step-circle" style="width: 20px; height: 20px; border-radius: 50%; background: #ccc; margin-bottom: 5px;"></div>
              <div>Out of Delivery<br />27 June</div>
            </div>
            <div class="line" style="width: 50px; height: 2px; background: #ccc;"></div>
            <div class="step" style="display: flex; flex-direction: column; align-items: center;">
              <div class="step-circle" style="width: 20px; height: 20px; border-radius: 50%; background: #ccc; margin-bottom: 5px;"></div>
              <div>Delivery<br />28 June</div>
            </div>
          </div>

          <div class="explore-section" style="margin-top: 60px; text-align: center;">
            <h2 style="color: #4a7d20; margin-bottom: 20px;">Explore More</h2>
            <div class="explore-products" style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-bottom: 20px;">
              <img src="images/Biscuits & Cookies.png" alt="Biscuits" style="width: 150px; border-radius: 10px;" />
              <img src="images/Dry Fruits I.png" alt="Dry Fruits" style="width: 150px; border-radius: 10px;" />
              <img src="images/Drinks & Juices J.png" alt="Drinks" style="width: 150px; border-radius: 10px;" />
              <img src="images/Pasta & Noodles J.png" alt="Pasta" style="width: 150px; border-radius: 10px;" />
              <a href="categories.html" class="see-more"
                style="color:black; text-decoration:none; font-weight:bold;">See More</a>
            </div>
          </div>
        `;

        // Insert the HTML into the container.
        container.innerHTML = html;

        // AFTER injecting the HTML ‚Üí load order details from localStorage, if present.
        const orderSummary = JSON.parse(localStorage.getItem('orderSummary')) || [];
        if (orderSummary.length > 0) {
          const p = orderSummary[0];
          document.getElementById('product-name').textContent = p.productNameLine;
          document.getElementById('product-description').textContent = p.description || '';
          document.getElementById('product-details').textContent = `Price: ${p.totalPrice}`;
          document.getElementById('quantity').textContent = `Quantity No : ${p.quantity}`;
          document.getElementById('product-image').src = p.imageSrc;
        } else {
          // If nothing found, display a fallback message.
          container.innerHTML = `<p style="text-align:center; margin-top:50px;">No order found.</p>`;
        }
      }
    </script>
  </body>
</html>
